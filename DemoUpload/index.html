<!DOCTYPE HTML>
<!--
/*
 * jQuery File Upload Plugin Demo 8.8.3
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
-->
<html lang="en">
<head>
<!-- Force latest IE rendering engine or ChromeFrame if installed -->
<!--[if IE]>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<![endif]-->
<meta charset="utf-8">
<title>jQuery File Upload Demo</title>

<noscript><link rel="stylesheet" href="css/jquery.fileupload-ui-noscript.css"></noscript>
</head>
<body>

<label>Example: <input id="example" type="text" name="example2"></label>
<input id="fileupload" type="file" name="files[]" data-url="http://localhost:8888" multiple="multiple"/>
<!--   <form id="myform" action="http://localhost:8888" method="POST" enctype="multipart/form-data"> -->
<!--     	<input type="hidden" name="example1" value="test"> -->
<!--     <div class="row"> -->
<!--         <label>Example: <input id="example" type="text" name="example2"></label> -->
<!--     </div> -->
<!--     <input type="file" name="files[]" /> -->
<!--     <input id="but" type="submit" value="upload"/> -->
<!-- </form> -->

  
  <div id="progress">
        <div class="bar" style="width: 0%;"></div>
    </div>

<p id="test">TESTING JQUERY</p>
<div id="status"></div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.js">
<!-- Require for FF3 -->
</script>
<!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included -->
<script src="js/vendor/jquery.ui.widget.js">
<!-- Require for FF3 -->
</script>
<!-- The Templates plugin is included to render the upload/download listings -->


<script src="js/jquery.iframe-transport.js">
<!-- Require for FF3 -->
</script>
<!-- The basic File Upload plugin -->
<script src="js/jquery.fileupload.js">
<!-- Require for FF3 -->
</script>

<script type="text/javascript">
//for form upload
// $('#fileupload').bind('fileuploadsubmit', function (e, data) {
// 	$.each(data, function(index, element) {
//         alert(element.name);
//     });
	
//  data.submit();
// });

//	for handle submit
// $("#fileupload").submit(function(e,data){
// 	alert(data);
// 	return false;
// });

	//for ajax upload
$('#fileupload').fileupload({
	  dataType:"json",	  
	  
	  done:function(e,data){
		  alert('done');
		  $('#status').html('<p id="up">Done !! </p>');
	  },
	  
	  progressall: function (e, data) {
	        var progress = parseInt(data.loaded / data.total * 100, 10);
	        //$('#progress .bar').append('<p>'+progress+'% '+ parseInt(data.bitrate/1024,10) +'Kb</p>');
	        $('#progress').html('<p>'+progress+'% '+ parseInt(data.bitrate/1024,10) +'Kb</p>');
	    },
	    
	  add: function(e,data){
		  $('#status').html('<p id="up">Uploading ... </p>');		
// 		  var myObject = new Object();
// 		  myObject.name = "John";
// 		  myObject.age = 12;
		  
// 		  var myString = JSON.stringify(myObject);
		  
		  
		  		

		  data.text={};
		  data.text['exam']='fsdaft';

// 		  $.each(data.files, function(index, element) {			  
// 		       	alert(index+' : '+element);   
// 		   });

		  testajax();
		  
		  data.submit();		  
	  }	  
	});
	
// 	$("#txt").click(function() {
// 		var dat={error: "John",field: "adsfas" };
// 		var ss={fieds:[]};
// 		ss["fieds"].push({adsf:'sfdg'});
		
// 		var ss={};
// 		ss['error']='asdxcz';
// 		ss['excrror']='asdx324cz';
//		ss.dox='asdxc';
		
// 		 $.each(ss, function(index, element) {	            
//        	alert(index+' : '+element);
       
//    });
				
// 	});
	
	function testajax(){
		var ss={};
		ss['example']=$("#example").val();		
		
		$.ajax({
			  type: "POST",
			  url: "http://localhost:8888",
			  data: ss
			})
			
// 			  .done(function( msg ) {
// 			    alert( "Data Saved: " + msg );
// 			  })

				;
	};
</script>
</body> 
</html>
